[{ "model": "utl_files.macrodefinition",
   "pk": 12703,
   "fields": { "source": "core-asset-index-lead_presentation/includes/block.utl",
               "text": "macro photo_text %]\n    [%  if photo_credit == 'true' && credit %]\n        <div class=\"photo-byline\">\n        [%  photo_credit_text;\n            credit | html; credit %]\n        </div>\n    [%  end; /* photo_credit */\n        if photo_caption == 'true' && caption %]\n        <div class=\"photo-cutline\">\n            [% caption | html;  caption %]\n        </div>\n    [%  end; /* photo caption */\nend", "name": "photo_text",
               "start": 7951,
               "end": 8359,
               "line": 177 } },
 { "model": "utl_files.macrodefinition",
   "pk": 12704,
   "fields": { "source": "core-asset-index-map/block.utl",
               "text": "macro time_updated %]\n[% if asset.lastupdated != null %]\n        <dd>\n        <em class=\"item-updated\">\n                [%         update_text;\n                        echo ': ';\n                        asset.lastupdated('F d, Y - g:i a') %]\n        </em></dd>\n[% else %]\n    <dd>\n        <em class=\"item-updated\">\n                [%         'Posted: ';\n                        if show_posted_time == 'true';\n                                asset.starttime('F d, Y - g:i a');\n                        else;\n                                asset.starttime('F d, Y');\n                        end; %]\n        </em></dd>\n[% end %]\n[% end",
               "name": "time_updated",
               "start": 6935,
               "end": 7332,
               "line": 185 } },
 { "model": "utl_files.macrodefinition",
   "pk": 12705,
   "fields": { "source": "core-asset-index-map/block.utl",
               "text": "macro photo_text %]\n        [%        if photo_credit == 'true' && credit %]\n                <div class=\"photo-byline\">\n                [%        photo_credit_text;\n                        credit | html; credit %]\n                </div>\n        [%         end; /* photo_credit */\n                if photo_caption == 'true' && caption %]\n                <div class=\"photo-cutline\">\n                        [% caption | html;  caption %]\n                </div>\n        [%         end; /* photo caption */\nend",
               "name": "photo_text",
               "start": 7359,
               "end": 7694,
               "line": 206 } },
 { "model": "utl_files.macrodefinition",
   "pk": 12706,
   "fields": { "source": "core-slideshow-presentation-1-15-1-test_block/block.utl",
               "text": "macro build_slideshow_presentation_nav_items;\n        /* reset */\n        panel_nav_item_container_class = '';\n        panel_nav_item_container_style = '';\n\n        /* building panel_nav_item_container_class */\n\n        /* building panel_nav_item_container_style */ %]\n        <ul class=\"slideshow-presentation-nav-items [% panel_nav_item_container_class %]\" style=\"[% panel_nav_item_container_style %]\">\n        [%         nav_item_count = 0;\n                asset_iter = 0;\n                ad_iter = 0;\n                while nav_item_count < total_items;\n                        /* reset */\n                        panel_nav_item_class = '';\n                        panel_nav_item_style = '';\n                        leadin = core_base_library_leadIn('asset':asset)|strip_tags;\n                        max_bg_width = panel_nav_item_width;\n                        max_bg_height = panel_nav_item_height;\n                        photo = '';\n\n                        if total_ads > 0 && ad_iter < total_ads;\n                                for ad_slots as ad_slot;\n\n                                        temp_ad_slot = ad_slot - 1;\n                                        temp_ad_instance = ad_iter + 1;\n\n                                        if temp_ad_slot < 0;\n                                                temp_ad_slot = 0;\n                                        else if temp_ad_slot >= total_items;\n                                                temp_ad_slot = (this.block.assets | length) - 1;\n                                        end;\n                                        if temp_ad_slot == nav_item_count && ad_iter <= total_ads;  /* > */\n                                                        if ad_server == \"OAS\";\n                                                                sRawNavRegionId = ad_region_id | split(\"|\");\n                                                                aOasNavAdRegions = sRawNavRegionId[0] | splittrim(\",\");\n                                                                ad_nav_item_content = \"<script><!-- OAS_AD('\" + aOasNavAdRegions[ad_iter] + \"'); //--></script>\";\n                                                        else if ad_title_type == \"custom\";\n                                                                ad_nav_item_content = ad_custom_title;\n                                                        else if ad_title_type == \"internal\";\n                                                                ad_nav_item_content = \"Advertisement\";\n                                                        else;\n                                                                ad_nav_item_content = \"Advertisement\";\n                                                        end;\n\n                                                /* building panel_nav_item_class */\n                                                        list_position_class = '';\n                                                        if nav_item_count == 0;\n                                                                list_position_class =  \"first-in-list\";\n                                                        else if nav_item_count == total_items - 1;\n                                                                list_position_class = \"last-in-list\";\n                                                        end;\n\n\n                                                        panel_nav_item_classes = [\n                                                                \"slideshow-presentation-nav-item\",\n                                                                \"blox-transparency\",\n                                                                \"ad-nav-item\",\n                                                                list_position_class\n                                                        ];\n\n                                                /* building panel_nav_item_style */\n\n                                                        cursor_style = '';\n                                                        if panel_nav_trigger == \"hover\";\n                                                                cursor_style = ' cursor:pointer; ';\n                                                        end;\n\n                                                        panel_relative_style == '';\n                                                        if navigation_orientation == \"horizontal\";\n                                                                panel_relative_style = \"position: relative;\";\n                                                        end;\n\n                                                        panel_nav_item_styles = [\n                                                                \"height: \" + panel_nav_item_height + \"px;\",\n                                                                \"width: \" + panel_nav_item_width + \"px;\",\n                                                                cursor_style,\n                                                                panel_relative_style,\n                                                                \"ad\"\n                                                        ];\n\n                                                        %]\n\n                                                        <li id=\"slideshow-presentation-[% slideshow_presentation_instance %]-nav-[% nav_item_count %]\" class=\"[% panel_nav_item_classes | join(' '); %]\" style=\"[% panel_nav_item_styles | join(' '); %]\" data-slideshow-presentation-ad=\"[% ad_slots[ad_iter] %]\">\n                                                                [% if ad_server != \"OAS\" %]\n                                                                        <a href=\"\" class=\"link\"><span class=\"headline\">\n                                                                [% end; %]\n                                                                        [% ad_nav_item_content %]\n                                                                [% if ad_server != \"OAS\" %]\n                                                                        </span></a>\n                                                                [% end; %]\n                                                        </li>\n                                                [% ad_iter = ad_iter + 1;\n                                                nav_item_count = nav_item_count + 1;\n                                        end;         /* ad builder loop */\n                                end;         /* ad_slot loop */\n                        end;         /* master ad loop */\n                        if asset_iter < (this.block.assets | length);         /* > */\n\n                        panel_nav_item_class = '';\n                        panel_nav_item_style = '';\n                        leadin = core_base_library_leadIn('asset':asset)|strip_tags;\n                        max_bg_width = panel_nav_item_width;\n                        max_bg_height = panel_nav_item_height;\n                        photo = '';\n                        asset_href = '';\n                                asset = this.block.assets[asset_iter];\n                                if navigation_orientation == \"horizontal\";\n                                        for thumb_bg_image_size_array as image_thumb;\n                                                if !photo && image_thumb > panel_nav_item_width;\n                                                        photo = asset.preview(image_thumb);\n                                                        if !photo;\n                                                                if asset.items('relationship':'child')[0].preview(image_thumb);\n                                                                        photo = asset.items('relationship':'child')[0].preview(image_thumb);\n                                                                        if photo; break; end;\n                                                                else if asset.type == 'business' && tryLogo;\n                                                                        photo = asset.logo;\n                                                                        if photo; break; end;\n                                                                else if asset.type == 'image';\n                                                                        photo = asset.preview(image_thumb);\n                                                                        if photo; break; end;\n                                                                else if asset.type == 'edition' || asset.type == 'collection';\n                                                                        for thumb_bg_image_size_array as image_thumb_sub;\n                                                                                if asset.items('relationship':'child')[0].preview(image_thumb_sub) < max_bg_width;         /* > */\n                                                                                        if asset.preview(image_thumb_sub);\n                                                                                                photo = asset.items('relationship':'child')[0].preview(image_thumb_sub);\n                                                                                                if photo;break;end;\n                                                                                        end; /* if */\n                                                                                end; /* if */\n                                                                        end; /* for */\n                                                                end;  /* if */\n                                                        end; /* if !photo */\n                                                end; /* if image_thumb > panel_nav_item_width; */\n                                        end; /* for */\n                                end; /* if nav_orientation */\n                                echo '</script>';\n\n                                /*        The absolute, last-ditch effort to get any type of thumbnail */\n                                if !photo.url;\n                                        if navigation_orientation == \"horizontal\" && panel_nav_item_width > 100;\n                                                        image_thumb = 300;\n                                        else;\n                                                image_thumb = 100;\n                                        end;\n                                        photo =  asset.items('relationship':'child')[0].preview(image_thumb);\n                                end;\n\n\n                                if photo && navigation_orientation == \"horizontal\";\n                                        if photo.url | startswith(\"/\");\n                                                photo.url = \"http:/\" + photo.url;\n                                        end;\n                                        panel_nav_bg_style = \"background:url(\" + photo.url + \") no-repeat center center #343434;\";\n                                else if !photo.url;\n                                        panel_nav_bg_style = '';\n                                end;\n\n                                /* building panel_nav_item_class */\n                                        list_position_class = '';\n                                        if nav_item_count == 0;\n                                                list_position_class =  \"first-in-list\";\n                                        else if nav_item_count == total_items - 1;\n                                                list_position_class = \"last-in-list\";\n                                        end;\n\n                                        panel_nav_item_classes = [\n                                                \"slideshow-presentation-nav-item\",\n                                                \"blox-ie-no-filter\",\n                                                \"blox-transparency\",\n                                                list_position_class,\n                                                asset.type\n                                        ];\n\n                                /* building panel_nav_item_style */\n\n                                        cursor_style = '';\n                                        if panel_nav_trigger == \"hover\";\n                                                cursor_style = 'cursor:pointer;';\n                                        end;\n\n                                        panel_relative_style == '';\n                                        if navigation_orientation == \"horizontal\";\n                                                panel_relative_style = \"position: relative;\";\n                                        end;\n\n                                        panel_nav_item_styles = [\n                                                panel_nav_bg_style,\n                                                \"height: \" + panel_nav_item_height + \"px;\",\n                                                \"width: \" + panel_nav_item_width + \"px;\",\n                                                cursor_style,\n                                                panel_relative_style\n                                        ];\n\n\n                                /* build nav title */\n                                        if nav_headline_source == \"headline_only\";\n                                                if nav_title_truncate > 0;\n                                                        nav_title_content = asset.title | truncate(nav_title_truncate, \"...\");\n                                                else;\n                                                        nav_title_content = asset.title;\n                                                end;\n                                        else;\n                                                if asset.hammer;\n                                                        if nav_title_truncate > 0; nav_title_content = asset.hammer | truncate(nav_title_truncate, \"...\"); else; nav_title_content = asset.hammer;  end;\n                                                else if asset.kicker;\n                                                        if nav_title_truncate > 0; nav_title_content = asset.kicker | truncate(nav_title_truncate, \"...\"); else; nav_title_content = asset.kicker;  end;\n                                                else;\n                                                        if nav_title_truncate > 0; nav_title_content = asset.title | truncate(nav_title_truncate, \"...\"); else; nav_title_content = asset.title;  end;\n                                                end;\n                                        end;\n\n                                        if asset.type == \"link\";\n                                                if asset.url | contains(\"http\");\n                                                        asset_href = asset.url;\n                                                else;\n                                                        asset_href = \"http://\" + asset.url;\n                                                end;\n                                        else;\n                                                asset_href = \"http://\" + cms.system.domain + asset.url;\n                                        end;\n\n                                /* The onclick attribute was left as an inline conditional. Quotes, apostrophes, conflict... oh my. */\n                                %]\n\n                                        <li id=\"slideshow-presentation-[% slideshow_presentation_instance %]-nav-[% nav_item_count %]\" class=\"[% panel_nav_item_classes | join(' ') %]\" style=\"[% panel_nav_item_styles %]\" [% if panel_nav_trigger == \"hover\" %]onclick=\"window.location = '[% asset_href %]'\"[% end %]>\n                                                [% if navigation_orientation == \"vertical\";\n                                                        photo = core_base_library_assetthumb('asset':asset,'sizearray':thumb_image_size_array);\n                                                        if photo.url %]\n                                                                <a href=\"[% asset_href %]\" title=\"[% asset.title %]\"  [% if panel_nav_trigger == \"hover\" %]onclick=\"window.location = '[% asset_href %]'\"[% end; %]>\n                                                                        <span class=\"thumb\">\n                                                                                        [% if lazyLoad;\n                                                                                                echo '<img class=\"blox-img-loader\" src=\"'+(placeHolder)+'\" data-original=\"'+(photo.url)+'\" width=\"'+(photo.width)+'\" />';\n                                                                                        else;\n                                                                                                echo '<img src=\"'+(photo.url)+'\" width=\"'+(photo.width)+'\" />';\n                                                                                        end; %]\n                                                                        </span>\n                                                                </a>\n                                                        [% end;\n                                                end; %]\n\n                                                <a href=\"[% asset_href %]\" title=\"[% asset.title %]\" class=\"link\">\n                                                        <span class=\"headline\">[% nav_title_content %]</span>\n                                                </a>\n                                        </li>\n                                        [%        nav_item_count = nav_item_count + 1;\n                                                asset_iter = asset_iter + 1;\n                        end; /* asset_iter */\n                end; /* master while */ %]\n        </ul>\n[% end",
               "name": "build_slideshow_presentation_nav_items",
               "start": 5552,
               "end": 15023,
               "line": 106 } }
]
